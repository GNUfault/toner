app-id: com.bluMATRIKZ.Toner
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk
command: toner

finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=pulseaudio
  - --device=dri
  
modules:
  - name: toner
    buildsystem: simple
    
    sources:
      - type: git
        url: https://github.com/bluMATRIKZ/toner.git
        branch: main

    build-commands:
      - make elf
      - install -Dm755 toner /app/bin/toner
      - install -Dm644 com.bluMATRIKZ.Toner.desktop /app/share/applications/com.bluMATRIKZ.Toner.desktop
      - install -Dm644 com.bluMATRIKZ.Toner.png /app/share/icons/hicolor/scalable/apps/icon.png
      - install -Dm644 com.bluMATRIKZ.Toner.metainfo.xml /app/share/metainfo/com.bluMATRIKZ.Toner.metainfo.xml

    cleanup:
      - /include
      - /lib/*.la
      - /lib/*.a
      - /lib/pkgconfig
      - /man
      - /share/doc
      - /share/gtk-doc
      - /share/man
      - /share/zsh
      - /share/bash-completion
      - '*.pyc'
      - '__pycache__'
      - '*.md'
